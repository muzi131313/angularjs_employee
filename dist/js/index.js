!function(){"use strict";angular.module("app",["ui.router","ngCookies","validation","ngAnimate"])}(),function(){"use strict";angular.module("app").value("dict",{}).run(["$http","dict",function(t,e){t({method:"GET",url:"/data/city.json"}).then(function(t){e.city=t},function(t){}),t({method:"GET",url:"/data/salary.json"}).then(function(t){e.salary=t},function(t){}),t({method:"GET",url:"/data/scale.json"}).then(function(t){e.scale=t},function(t){}),e.searchTabs=[{id:"city",name:"城市"},{id:"salary",name:"薪资"},{id:"scale",name:"公司规模"}]}])}(),function(){"use strict";angular.module("app").config(["$provide",function(t){t.decorator("$http",["$delegate","$q",function(t,e){return t.post=function(n,o,a){var i=e.defer();return t.get(n).then(function(t){i.resolve(t)},function(t){i.reject(t)}),i.promise},t}])}])}(),function(){"use strict";function t(){}angular.module("app").provider("message",t.bind(t)),t.prototype.setLevel=function(t){t=t},t.prototype.$get=function(){return{log:function(){"log"===level?console.log(arguments):angular.noop()},error:function(){"error"===level?console.error(arguments):angular.noop()},warn:function(){"error"===level?console.warn(arguments):angular.noop()}}}}(),function(){"use strict";angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("main",{url:"/main",templateUrl:"view/main.html",controller:"mainCtrl"}).state("position",{url:"/position/:id",templateUrl:"view/position.html",controller:"positionCtrl"}).state("company",{url:"/company/:id",templateUrl:"view/company.html",controller:"companyCtrl"}).state("search",{url:"/search",templateUrl:"view/search.html",controller:"searchCtrl"}).state("my",{url:"/my",templateUrl:"view/my.html",controller:"myCtrl"}).state("favourite",{url:"/favourite",templateUrl:"view/user/favourite.html",controller:"favouriteCtrl"}).state("login",{url:"/login",templateUrl:"view/user/login.html",controller:"loginCtrl"}).state("person",{url:"/person",templateUrl:"view/user/person.html",controller:"personCtrl"}).state("post",{url:"/post",templateUrl:"view/user/post.html",controller:"postCtrl"}).state("register",{url:"/register",templateUrl:"view/user/register.html",controller:"registerCtrl"}),e.otherwise("main")}])}(),function(){"use strict";angular.module("app").config(["$validationProvider",function(t){var e={phone:/^1[\d]{10}/,password:function(t){return(t+"").length>5},required:function(t){return!!t}},n={phone:{success:"",error:"必须是11位手机号"},password:{success:"",error:"长度至少6位"},required:{sccess:"",error:"不能为空"}};t.setExpression(e).setDefaultMsg(n)}])}(),function(){"use strict";angular.module("app").controller("companyCtrl",["$scope","$http","$state",function(t,e,n){e({method:"GET",url:"/data/company.json",params:{companyId:n.params.id}}).then(function(e){t.company=e.data,t.$broadcast("to-child",{word:"world!"})},function(t){}),t.$on("to-parent",function(t,e){console.log("to-parent",t,e)})}])}(),function(){"use strict";angular.module("app").controller("favouriteCtrl",["$scope","$http","$state","dict",function(t,e,n,o){e.get("data/myFavorite.json").then(function(e){var n=e.data;t.favouriteList=n,console.log("favourite.json data: ",n)})}])}(),function(){"use strict";angular.module("app").controller("loginCtrl",["cache","$scope","$http","$state","dict",function(t,e,n,o,a){e.submit=function(){n.post("data/login.json",e.user).then(function(e){var n=e.data;t.put("id",n.id),t.put("name",n.name),t.put("image",n.image),o.go("main")},function(t){console.log("submit() exists error: ",t)})}}])}(),function(){"use strict";angular.module("app").controller("mainCtrl",["$scope","$http",function(t,e){e({method:"GET",url:"/data/positionList.json"}).then(function(e){t.jobList=e.data},function(t){})}])}(),function(){"use strict";angular.module("app").controller("myCtrl",["$scope","$http","$state",function(t,e,n){}])}(),function(){"use strict";angular.module("app").controller("personCtrl",["cache","$scope","$http","$state","dict",function(t,e,n,o,a){t.get("name")&&(e.name=t.get("name"),e.image=t.get("image")),e.logout=function(){t.remove("id"),t.remove("name"),t.remove("image"),o.go("main")}}])}(),function(){"use strict";angular.module("app").controller("positionCtrl",["$log","$scope","$http","$state","$q","cache",function(t,e,n,o,a,i){function r(t){var o=a.defer();return n({method:"GET",url:"/data/company.json",params:{companyId:t}}).then(function(t){e.company=t.data,o.resolve(t)},function(t){o.reject(t)}),o.promise}var c=o.params.id;e.isLogin=!!i.get("name"),e.isActive=!1,i.put("key","day"),e.message=e.isLogin?"投个简历":"去登录",e.go=function(a){a?"已投递"!=e.message?n.post("data/handle.json",{id:e.position.id}).then(function(n){var o=n.data;t.log("handle result(): ",o),e.message="已投递"}):console.log("请勿重复投递"):o.go("login")},function(){var t=a.defer();return n({method:"GET",url:"/data/position.json",params:{positionId:c}}).then(function(n){var o=n.data;e.position=o,o.posted&&(e.message="已投递"),t.resolve(n)},function(e){t.reject(e)}),t.promise}().then(function(t){r(t.data.companyId)})}])}(),function(){"use strict";angular.module("app").controller("postCtrl",["$scope","$http","$state","dict",function(t,e,n,o){t.tabClick=function(t,e){},t.tabs=[{id:"all",name:"全部"},{id:"pass",name:"面试邀请"},{id:"fail",name:"不合适"}],e.get("data/myPost.json").then(function(e){var n=e.data;t.postList=n,console.log("resp data: ",n)},function(t){console.log("myPost.json exists error: ",t)}),t.tabClick=function(e,n){console.log(e,n);var o=t.filterObj;switch(e){case"all":delete o.state;break;case"pass":o.state="1";break;case"fail":o.state="-1"}},t.filterObj={}}])}(),function(){"use strict";angular.module("app").controller("registerCtrl",["$scope","$http","$state","dict","$interval",function(t,e,n,o,a){t.user={},t.mySubmit=function(){console.log("$scope.user: ",t.user),e.post("data/regist.json",t.user).then(function(t){n.go("login")},function(t){console.log("regist.json exists error: ",t)})};var i=60;t.sendMsgCode=function(){e({method:"GET",url:"data/code.json",params:{}}).then(function(e){if(1==+e.data.state){i=60;var n=a(function(){if(i<=0)return a.cancel(n),void(t.time="");i--,t.time=i+"s"},1e3)}},function(t){console.log("get code.json exists error: ",t)})}}])}(),function(){"use strict";angular.module("app").controller("searchCtrl",["$scope","$http","$state","dict",function(t,e,n,o){function a(t,e,n){t=t||[];var o,a,i,r,c,s;return t=t.filter(function(t,l){return a=r=s="",n&&Object.keys(n).length&&(n.cityName&&(a=n.cityName),n.jobName&&(r=n.jobName),n.salaryName&&(s=n.salaryName)),e&&(a=r=s=e),o=!!~t.cityName.indexOf(e),i=!!~t.job.indexOf(e),c=!!~t.salaryName.indexOf(e),o||i||c})}function i(n,o){e({method:"GET",url:"/data/positionList.json",params:o||{}}).then(function(e){a(e.data,n,o),t.jobList=e.data},function(t){})}t.search=function(){i(t.name,{jobName:t.jobName,cityName:t.cityName,salarayName:t.salarayName})},t.cancel=function(){t.name="",t.jobName="",t.cityName="",t.salarayName="",t.search()},t.tabClick=function(e,n){console.log("tab click item: ",e,n,o),t.sheets.list=o[e].data,t.sheets.visible=!0,t.tabId=e},t.selectClick=function(e,n){var o=t.tabId;console.log("selectClick item: ",e,n,o),e?(angular.forEach(t.tabs,function(t){t.id==o&&(t.name=n)}),t.filterObj[o+"Id"]=e):(delete t.filterObj[o+"Id"],angular.forEach(t.tabs,function(t){if(t.id==o)switch(t.id){case"city":t.name="城市";break;case"salary":t.name="薪水";break;case"scale":t.name="公司规模"}}))},t.search(),t.tabs=o.searchTabs,t.city=o.city,t.salary=o.salary,t.scale=o.scale,t.sheets={},t.filterObj={}}])}(),angular.module("app").filter("filterByObj",[function(){return function(t,e){var n=[];return t?(angular.forEach(t,function(t){var o=!0;for(var a in e)t[a]!==e[a]&&(o=!1);o&&n.push(t)}),console.log("result: ",n),n):n}}]),function(){"use strict";angular.module("app").factory("cache",["$cookies",function(t){return{put:function(e,n){t.put(e,n)},get:function(e){return t.get(e)},remove:function(e){t.remove(e)}}}])}(),function(){"use strict";angular.module("app").directive("appFooter",[function(){return{restrict:"A",replace:!0,templateUrl:"view/template/footer.html",link:function(t,e,n){}}}])}(),function(){"use strict";angular.module("app").directive("appHead",["cache",function(t){return{restrict:"A",replace:!0,templateUrl:"view/template/head.html",link:function(e,n,o){e.name=t.get("name")||""}}}])}(),function(){"use strict";angular.module("app").directive("appHeadBar",[function(){return{restrict:"A",replace:!0,templateUrl:"view/template/headBar.html",scope:{title:"@"},link:function(t,e,n){t.back=function(){window.history.back()},t.$on("to-child",function(t,e){console.log("to-child",t,e)}),t.$emit("to-parent",{show:"hai"})}}}])}(),function(){"use strict";angular.module("app").directive("appPositionList",["$http",function(t){return{restrict:"A",replace:!0,templateUrl:"view/template/positionList.html",scope:{data:"=",filterObj:"=",claz:"=",isFavourite:"="},link:function(e,n,o){e.myClaz=o.claz||"",o.isFavourite&&(e.select=function(e){t.post("data/favorite.json",{id:e.id,select:!e.select}).then(function(t){t.data;e.select=!e.select})})}}}])}(),function(){"use strict";angular.module("app").directive("appSheet",[function(){return{restrict:"A",replace:!0,templateUrl:"view/index/sheet.html",scope:{datas:"=",visible:"=",select:"&"},link:function(t,e,n){t.cancelSheet=function(){t.visible=!1}}}}])}(),function(){"use strict";angular.module("app").directive("appTab",[function(){return{restrict:"A",replace:!0,templateUrl:"view/index/tab.html",scope:{data:"=",tabClick:"&"},link:function(t,e,n){t.selectId=t.data[0].id,t.click=function(e){t.selectId=e.id,t.tabClick(e)}}}}])}(),function(){"use strict";angular.module("app").directive("appCompany",[function(){return{restrict:"A",replace:!0,templateUrl:"view/job/company.html",scope:{company:"="},link:function(t,e,n){}}}])}(),function(){"use strict";angular.module("app").directive("appPositionClaz",[function(){return{restrict:"A",replace:!0,templateUrl:"view/job/positionClaz.html",scope:{clazes:"="},link:function(t,e,n){var o=this;t.showCategory=function(e){o.pos(t,e)},t.$watch("clazes",function(e,n,o){e&&t.showCategory(0)})},pos:function(t,e){t.positionList=t.clazes.positionClass[e].positionList,t.isActive=e}}}])}(),function(){"use strict";angular.module("app").directive("appPositionInfo",["$http",function(t){return{restrict:"A",replace:!0,templateUrl:"view/job/positionInfo.html",scope:{isActive:"=",isLogin:"=",position:"="},link:function(e,n,o){e.imgPath="image/star"+(e.isActive?"active":"")+".png",e.getInMyFavorite=function(n){t.post("data/favorite.json",{id:n.id,select:n.select}).then(function(t){t.data;console.log("item: ",n),e.isActive=!e.isActive,e.imgPath="image/star"+(e.isActive?"-active":"")+".png"})}}}}])}();